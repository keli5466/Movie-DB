{"version":3,"sources":["main.js"],"names":["console","log","$","document","ready","Handlebars","registerPartial","templates","registerHelper","arr","limit","Array","isArray","slice","value","options","parseInt","api_key","bind","btnClick","$class","template","on","itemKey","data","$self","$container","closest","renderData","selector","type","temp","popularCacheJSON","sessionStorage","getItem","popularCacheArray","JSON","parse","filteredID","popularCache","filter","element","id","html","ajax","url","success","results","setItem","stringify","error","XMLHttpRequest"],"mappings":"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","sourcesContent":["console.log('\\'Allo \\'Allo!');\n\n$(document).ready(function() {\n\n\tHandlebars.registerPartial('gallery-item', Handlebars.templates['gallery-item.hbs'])\n\n\t// Limit Helper to only include top 5 for HB\n\tHandlebars.registerHelper('limit', function (arr, limit) {\n\t  if (!Array.isArray(arr)) { return []; }\n\t  return arr.slice(0, limit);\n\t});\n\tHandlebars.registerHelper(\"math\", function(value, options)\n\t{\n\t    return parseInt(value) + 1;\n\t});\n\n\tconst api_key = 'd5d44ba71ba42d221748536faf51c078';\n\n\t// Click Events\n\tfunction bind(){\n\t\tbtnClick('.btn', 'detail');\n\t\tbtnClick('.goBack', 'gallery-item');\n\t}\n\n\tfunction btnClick($class, template){\n\t\t$(document).on('click', $class , function(){\n\t\t\tvar itemKey = $(this).data('key');\n\t\t\tvar $self = $(this);\n\t\t\tvar $container = $self.closest('.content-box');\n\t\t\trenderData($container, itemKey , template);\n\t\t})\n\t}\n\n\tfunction renderData(selector, type, temp){\n\t\t// Retrieve Cache\n\t\tvar popularCacheJSON = sessionStorage.getItem('popularCache');\n\t\tvar popularCacheArray = JSON.parse(popularCacheJSON);\n\t\tconsole.log('pop', popularCacheArray);\n\n\t\t// if gallery-item retrive the matching id from cache and render template\n\t\tif (temp == 'gallery-item'){\n\t\t\tvar filteredID = popularCache.filter(element => element.id == type);\n\t\t\tvar template = Handlebars.templates[temp + '.hbs'](filteredID[0]);\n\t\t\t$(selector).html('').html(template);\n\t\t}\n\t\telse{\n\t\t\t$.ajax({\n\t\t\t\ttype : 'GET',\n\t\t\t\turl : `https://api.themoviedb.org/3/movie/${type}?api_key=${api_key}&append_to_response=videos&language=en-US&page=1`,\n\t\t\t\tsuccess: function(data){\n\t\t\t\t\tconsole.log('AJAX CALL');\n\t\t\t\t\tif (type === 'popular') {\n\t\t\t\t\t\tconsole.log('data',data);\n\t\t\t\t\t\tpopularCache = data.results;\n\t\t\t\t\t\tsessionStorage.setItem('popularCache', JSON.stringify(popularCache));\n\t\t\t\t\t}\n\t\t\t\t\tvar template = Handlebars.templates[temp + '.hbs'](data);\n\t\t\t\t\t$(selector).html('').html(template);\n\t\t\t\t},\n\t\t\t\terror: function(XMLHttpRequest){\n\t\t\t\t\tconsole.log('error', XMLHttpRequest);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t}\n\n\trenderData('#content-holder','popular', 'gallery');\n\tbind();\n\n});\n"],"file":"main.js"}