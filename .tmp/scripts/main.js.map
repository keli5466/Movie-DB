{"version":3,"sources":["main.js"],"names":["console","log","$","document","ready","Handlebars","registerPartial","templates","registerHelper","arr","limit","Array","isArray","slice","value","options","parseInt","api_key","bind","on","d","data","$self","$container","closest","renderData","selector","type","temp","popularCacheJSON","sessionStorage","getItem","popularCache","JSON","parse","filteredID","filter","element","filterByID","template","html","ajax","url","success","popCache","results","setItem","stringify","error","XMLHttpRequest","a","id"],"mappings":"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","sourcesContent":["console.log('\\'Allo \\'Allo!');\n\n$(document).ready(function() {\n\n\tHandlebars.registerPartial('gallery-item', Handlebars.templates['gallery-item.hbs'])\n\n\t// Limit Helper to only include top 5 for HB\n\tHandlebars.registerHelper('limit', function (arr, limit) {\n\t  if (!Array.isArray(arr)) { return []; }\n\t  return arr.slice(0, limit);\n\t});\n\tHandlebars.registerHelper(\"math\", function(value, options)\n\t{\n\t    return parseInt(value) + 1;\n\t});\n\n\tconst api_key = 'd5d44ba71ba42d221748536faf51c078';\n\n\tfunction bind(){\n\t\t$(document).on('click', '.btn', function(){\n\t\t\tvar d = $(this).data('key');\n\t\t\tvar $self = $(this);\n\t\t\tvar $container = $self.closest('.content-box');\n\t\t\trenderData($container, d , 'detail');\n\t\t})\n\t\t$(document).on('click', '.goBack', function(){\n\t\t\tconsole.log(this);\n\t\t\tvar d = $(this).data('key');\n\t\t\t// console.log(d);\n\t\t\tvar $self = $(this);\n\t\t\tvar $container = $self.closest('.content-box');\n\t\t\trenderData($container, d , 'gallery-item');\n\t\t\t// var popularCacheJSON = sessionStorage.getItem('PopularCacheAPI');\n\t\t\t// var popularCache = JSON.parse(popularCacheJSON);\n\t\t\t// var popularCacheJSON = sessionStorage.getItem('PopularCacheAPI');\n\t\t\t// var popularCache = JSON.parse(popularCacheJSON);\n\t\t\t//\n\t\t\t//\n\t\t\t// var filteredID = popularCache.filter(filterByID);\n\t\t})\n\t}\n\n\tfunction renderData(selector, type, temp){\n\n\t\tvar popularCacheJSON = sessionStorage.getItem('popCache');\n\t\tvar popularCache = JSON.parse(popularCacheJSON);\n\n\t\tconsole.log('pop', popularCache);\n\n\t\tif (temp == 'gallery-item'){\n\t\t\tvar filteredID = popularCache.filter(function(element){\n\t\t\t   return filterByID(element, type);\n\t\t\t});\n\t\t\tconsole.log(filteredID[0]);\n\t\t\tvar template = Handlebars.templates[temp + '.hbs'](filteredID[0]);\n\t\t\t$(selector).html('').html(template);\n\t\t}\n\t\telse{\n\t\t\t$.ajax({\n\t\t\t\ttype : 'GET',\n\t\t\t\turl : `https://api.themoviedb.org/3/movie/${type}?api_key=${api_key}&append_to_response=videos&language=en-US&page=1`,\n\t\t\t\tsuccess: function(data){\n\t\t\t\t\tif (type === 'popular') {\n\t\t\t\t\t\tconsole.log('data',data);\n\t\t\t\t\t\tpopCache = data.results;\n\t\t\t\t\t\tsessionStorage.setItem('popCache', JSON.stringify(popCache));\n\t\t\t\t\t}\n\t\t\t\t\t// if (data.results){\n\t\t\t\t\t// \tvar resultsArray = data.results;\n\t\t\t\t\t// \tsessionStorage.setItem('resultsArray', resultsArray);\n\t\t\t\t\t// \tvar filteredID = resultsArray.filter(filterByID);\n\t\t\t\t\t// \tconsole.log('filtered',filteredID);\n\t\t\t\t\t// }\n\t\t\t\t\tvar template = Handlebars.templates[temp + '.hbs'](data);\n\t\t\t\t\t$(selector).html('').html(template);\n\t\t\t\t},\n\t\t\t\terror: function(XMLHttpRequest){\n\t\t\t\t\tconsole.log('error', XMLHttpRequest);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t}\n\n\n\tfunction filterByID(element, a){\n\t\t// console.log('in', a);\n\t\t// console.log(element.id);\n\t\treturn element.id == a;\n\t}\n\n\n\trenderData('#content-holder','popular', 'gallery');\n\tbind();\n\n});\n"],"file":"main.js"}